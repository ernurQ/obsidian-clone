(()=>{"use strict";const e=document.querySelector(".modal"),t=e.querySelector(".modal__content");function n(){e.classList.remove("modal_active"),t.innerHTML='\n        <div class="modal__close-btn">&times;</div>\n    '}e.addEventListener("click",(e=>{const t=e.target;null!=t&&(t.classList.contains("modal")||t.classList.contains("modal__close-btn"))&&n()}));class o{constructor(e,t,n){this.content=t,this.path=n,this.title=e}get id(){return this.title}_renderNotesPanel(){const e=document.createElement("li");e.classList.add("notes-panel__note"),e.textContent=this.title,document.querySelector(".notes-panel__list").append(e)}_renderNoteTab(){const e=document.createElement("li");e.classList.add("tab"),e.innerHTML=`\n            <div class="tab__content">${this.title}</div>\n            <div class="tab__close-btn">&times;</div>\n        `,document.querySelector(".tabs-list").append(e)}_renderNoteContent(){const e=document.createElement("input");e.classList.add("note__header"),e.type="text",e.value=this.title;const t=document.createElement("textarea");t.classList.add("note__content"),t.value=this.content;const n=document.createElement("li");n.classList.add("note"),n.append(e),n.append(t),document.querySelector(".workspace__notes").append(n)}render(){this._renderNotesPanel(),this._renderNoteTab(),this._renderNoteContent()}open(){this._renderNoteTab(),this._renderNoteContent()}}const s=document.querySelector(".workspace__notes");function a(e){s.querySelectorAll(".note").forEach((t=>{t.querySelector(".note__header").value!==e?t.classList.remove("note_active"):t.classList.add("note_active")}))}const c=document.querySelector(".tabs-list");function l(e){c.querySelectorAll(".tab").forEach((t=>{t.querySelector(".tab__content").textContent!==e?t.classList.remove("tab_active"):t.classList.add("tab_active")})),a(e)}function r(){const s=document.querySelector(".notes-panel");!function(s){const c=document.createElement("form");c.innerHTML='\n        <form action="#" class="modal__form">\n        <label class="modal__label">\n            Note title\n            <input class="modal__input" name="title">\n        </label>\n        <label class="modal__label">\n            Note path\n            <input class="modal__input" placeholder="/" name="path">\n        </label>\n\n        <button class="modal__submit">create</button>\n        </form>\n    ',s.addEventListener("click",(()=>{var n;n=c,e.classList.add("modal_active"),t.append(n)})),c.addEventListener("submit",(e=>{e.preventDefault();let{title:t,path:s}=Object.fromEntries(new FormData(c).entries());""===s&&(s="/"),""!==t&&(c.reset(),n(),new o(t,"",s).render(),l(t),a(t))}))}(s.querySelector(".notes-panel__new-note")),s.querySelector(".notes-panel__list").addEventListener("click",(e=>{const t=e.target;if(null!==t&&t.classList.contains("notes-panel__note")){const e=t.textContent;if(function(e){const t=c.querySelectorAll(".tab");for(const n of t)if(n.querySelector(".tab__content").textContent===e)return!0;return!1}(e))return l(e),void a(e);new o(e,"","/").open(),l(e),a(e)}}))}document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelector(".navbar__notes-panel-btn"),t=document.querySelector(".notes-panel");e.addEventListener("click",(()=>{t.classList.toggle("notes-panel_collapsed")}))}(),r(),c.addEventListener("click",(e=>{const t=e.target;if(null!==t){if(t.classList.contains("tab__close-btn")){const e=t,n=t.parentElement;return n.classList.add("tab_collapsed"),e.remove(),function(e){const t=s.querySelectorAll(".note");for(let n=0;n<t.length;n++){const o=t[n];if(o.querySelector(".note__header").value===e&&(o.remove(),o.classList.contains("note_active")&&t.length>1)){const e=t[0===n?1:0].querySelector(".note__header").value;console.log(e),l(e),a(e)}}}(n.querySelector(".tab__content").textContent),void setTimeout((()=>{n.remove()}),250)}if(t.classList.contains("tab__content")){if(t.parentElement.classList.contains("tab_active"))return;l(t.textContent)}if(t.classList.contains("tab")){if(t.classList.contains("tab_active"))return;l(t.textContent)}}}))}))})();